import{_ as s,c as a,o as i,ah as n,at as t,au as o,av as r}from"./chunks/framework.CZfrKfUB.js";const y=JSON.parse('{"title":"è¿è¡Œè¿½è¸ª","description":"","frontmatter":{},"headers":[],"relativePath":"zh_CN/develop/tracing.md","filePath":"zh_CN/develop/tracing.md"}'),l={name:"zh_CN/develop/tracing.md"};function p(h,e,d,c,k,g){return i(),a("div",null,[...e[0]||(e[0]=[n('<h1 id="è¿è¡Œè¿½è¸ª" tabindex="-1">è¿è¡Œè¿½è¸ª <a class="header-anchor" href="#è¿è¡Œè¿½è¸ª" aria-label="Permalink to â€œè¿è¡Œè¿½è¸ªâ€">â€‹</a></h1><p>åœ¨ Studio ä¾§è¾¹æ çš„ Trace é¡µé¢ä¸­å¯ä»¥æŸ¥çœ‹è¿è¡Œè¿½è¸ªçš„è¯¦ç»†ä¿¡æ¯ã€‚åŒ…æ‹¬å„ä¸ªæ¨¡å—çš„è¾“å…¥ã€è¾“å‡ºã€å·¥å…·è°ƒç”¨æƒ…å†µã€æ‰§è¡Œè€—æ—¶ç­‰å„ç§è¿è¡Œä¿¡æ¯ã€‚</p><p>è¯¥åŠŸèƒ½åŸºäº <a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/" target="_blank" rel="noreferrer">OpenTelemetry è¯­ä¹‰è§„èŒƒ</a>å’Œ <a href="https://opentelemetry.io/docs/specs/otlp/" target="_blank" rel="noreferrer">OTLP åè®®</a>æ„å»ºï¼Œä¸ä»…å¯ä»¥å¼€ç®±å³ç”¨åœ°æ¥æ”¶å’Œå­˜å‚¨ AgentScope ä¸ŠæŠ¥çš„å„ç§å¯è§‚æµ‹ä¿¡æ¯ï¼Œ è¿˜æ”¯æŒä»»æ„çš„åŸºäº OpenTelemetry æˆ– LoongSuite çš„é‡‡é›†å·¥å…·/AI åº”ç”¨æ¡†æ¶ä¸ŠæŠ¥çš„æ•°æ®çš„é›†æˆã€‚</p><p><img src="'+t+'" alt="Trace"></p><h2 id="æ¦‚è§ˆé¡µé¢" tabindex="-1">æ¦‚è§ˆé¡µé¢ <a class="header-anchor" href="#æ¦‚è§ˆé¡µé¢" aria-label="Permalink to â€œæ¦‚è§ˆé¡µé¢â€">â€‹</a></h2><p>åœ¨æœ¬é¡µé¢å¯ä»¥æŸ¥çœ‹ä¸ŠæŠ¥åˆ° Studio çš„é“¾è·¯æ•°æ®çš„åŸºæœ¬ä¿¡æ¯ã€‚</p><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼šå°†é¼ æ ‡ç§»åŠ¨åˆ°é“¾è·¯åç§°åé¢çš„å›¾æ ‡ä¸Šå¯ä»¥æŸ¥çœ‹åˆ°è¯¥æ¡é“¾è·¯çš„åŸºæœ¬å…ƒä¿¡æ¯ï¼Œå¦‚ Trace IDã€‚</p></blockquote><p><img src="'+o+'" alt="Trace"></p><h2 id="è¯¦æƒ…é¡µé¢" tabindex="-1">è¯¦æƒ…é¡µé¢ <a class="header-anchor" href="#è¯¦æƒ…é¡µé¢" aria-label="Permalink to â€œè¯¦æƒ…é¡µé¢â€">â€‹</a></h2><p>å•å‡»æ¦‚è§ˆé¡µé¢ä¸­çš„ä»»æ„ä¸€æ¡é“¾è·¯å¯ä»¥æŸ¥çœ‹è¿™æ¡é“¾è·¯çš„è°ƒç”¨é¡ºåºä¸è°ƒç”¨å…³ç³»ï¼›è¿›ä¸€æ­¥ç‚¹é€‰ä¸åŒå±‚çº§çš„è°ƒç”¨ï¼Œå¯ä»¥çœ‹åˆ°è¿™äº›è°ƒç”¨å‘ç”Ÿæ—¶è¯¦ç»†çš„ä¸Šä¸‹æ–‡ã€‚</p><p>åœ¨ Metadata åŒºåŸŸå¯ä»¥æŸ¥çœ‹è°ƒç”¨çš„è¾“å…¥å’Œè¾“å‡ºã€‚ å¯¹äº AI ç›¸å…³çš„è°ƒç”¨ï¼Œå¦‚ LLMã€Agent ç­‰ï¼Œè¾“å…¥è¾“å‡ºä¼šæŒ‰ç…§ OpenTelemetry è¯­ä¹‰è§„èŒƒå®šä¹‰çš„<a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/#recording-content-on-attributes" target="_blank" rel="noreferrer">ç»“æ„</a>è¿›è¡Œå±•ç¤ºã€‚å¯¹äºå¸¸è§„è°ƒç”¨ï¼Œå¦‚ Functionã€Format ç­‰ï¼Œè¾“å…¥è¾“å‡ºä¼šéµå¾ª AgentScope æ‰©å±•<a href="#agentscope-æ‰©å±•è§„èŒƒ">è¯­ä¹‰è§„èŒƒ</a>å±•ç¤ºã€‚</p><p><img src="'+t+'" alt="Trace"></p><p>åœ¨ All Attributes åŒºåŸŸï¼Œèƒ½å¤Ÿçœ‹åˆ°æœ¬æ¬¡è°ƒç”¨çš„æ‰€æœ‰å…³é”®çš„å…ƒä¿¡æ¯ï¼Œå‘½åéµå¾ª<a href="#è¯­ä¹‰è§„èŒƒ">è¯­ä¹‰è§„èŒƒ</a>ã€‚</p><p><img src="'+r+`" alt="Trace"></p><h2 id="è¯­ä¹‰è§„èŒƒ" tabindex="-1">è¯­ä¹‰è§„èŒƒ <a class="header-anchor" href="#è¯­ä¹‰è§„èŒƒ" aria-label="Permalink to â€œè¯­ä¹‰è§„èŒƒâ€">â€‹</a></h2><p>AgentScope-Studio çš„å¯è§‚æµ‹æ€§æ•°æ®éµå¾ªåŸºäº <a href="#opentelemetry-generative-ai">OpenTelemetry</a> çš„è¯­ä¹‰è§„èŒƒã€‚éµå¾ªè¯¥è¯­ä¹‰è§„èŒƒçš„æ•°æ®ä¼šåœ¨ Studio ä¸­å¾—åˆ°æ›´åŠ å‡†ç¡®ã€æ¸…æ™°çš„å¤„ç† ä¸å±•ç¤ºã€‚</p><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼šAgentScope åº“åŸç”Ÿçš„å¯è§‚æµ‹èƒ½åŠ›å·²ç»éµå¾ªè¯¥è¯­ä¹‰è§„èŒƒã€‚å³ä¾¿å…¶ä»–æ¥æºçš„å¯è§‚æµ‹æ•°æ®æš‚ä¸éµå¾ªè¯¥è¯­ä¹‰è§„èŒƒï¼Œä¾ç„¶å¯ä»¥æ­£å¸¸å±•ç¤ºé“¾è·¯æ•°æ®ï¼Œä½†éƒ¨åˆ†å…³é”®ä¿¡æ¯å¯èƒ½æ— æ³•é«˜äº®/ä¸“é—¨å±•ç¤ºã€‚</p></blockquote><h3 id="opentelemetry-generative-ai" tabindex="-1">OpenTelemetry Generative AI <a class="header-anchor" href="#opentelemetry-generative-ai" aria-label="Permalink to â€œOpenTelemetry Generative AIâ€">â€‹</a></h3><p>OpenTelemetry é¢å‘ Generative AI ç±»åº”ç”¨çš„å¯è§‚æµ‹æ•°æ®æä¾›äº†ä¸€ç»„è¯­ä¹‰è§„èŒƒæ ‡å‡†ï¼Œè¯¦ç»†å®šä¹‰å‚è§ <a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/" target="_blank" rel="noreferrer">Semantic conventions for generative client AI spans</a> ä¸ <a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-agent-spans/" target="_blank" rel="noreferrer">Semantic Conventions for GenAI agent and framework spans</a>ã€‚</p><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼šStudio å½“å‰éµå¾ªçš„ OpenTelemetry è¯­ä¹‰è§„èŒƒç‰ˆæœ¬ä¸º 1.38.0ã€‚</p></blockquote><p>å½“å‰éµå¾ªçš„è¯­ä¹‰è§„èŒƒåŒ…æ‹¬ï¼š</p><ul><li><a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/#inference" target="_blank" rel="noreferrer"><strong>Inference</strong></a>: model è°ƒç”¨</li><li><a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-agent-spans/#invoke-agent-span" target="_blank" rel="noreferrer"><strong>Invoke agent span</strong></a>: agent è°ƒç”¨</li><li><a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/#execute-tool-span" target="_blank" rel="noreferrer"><strong>Execute tool span</strong></a>: toolkit è°ƒç”¨</li></ul><h3 id="agentscope-æ‰©å±•è§„èŒƒ" tabindex="-1">AgentScope æ‰©å±•è§„èŒƒ <a class="header-anchor" href="#agentscope-æ‰©å±•è§„èŒƒ" aria-label="Permalink to â€œAgentScope æ‰©å±•è§„èŒƒâ€">â€‹</a></h3><p>é™¤å®šä¹‰åœ¨ OpenTelemetry ä¸­çš„å„ç§è¯­ä¹‰è§„èŒƒå¤–ï¼Œä¸ºäº†æ›´æ¸…æ™°åœ°å±•ç¤ºè°ƒç”¨è¿‡ç¨‹ï¼ŒAgentScope å¯¹ä¸€äº›ç‰¹å®šçš„è°ƒç”¨è¿‡ç¨‹è¿›è¡Œäº†è¯­ä¹‰è§„èŒƒçš„æ‰©å±•ã€‚</p><h4 id="common-è°ƒç”¨" tabindex="-1">Common è°ƒç”¨ <a class="header-anchor" href="#common-è°ƒç”¨" aria-label="Permalink to â€œCommon è°ƒç”¨â€">â€‹</a></h4><p>é€‚ç”¨äº AI åº”ç”¨ä¸­å‘ç”Ÿçš„æ‰€æœ‰å…³é”®è°ƒç”¨è¿‡ç¨‹ã€‚</p><table tabindex="0"><thead><tr><th>Key</th><th><a href="https://opentelemetry.io/docs/specs/semconv/general/attribute-requirement-level/" target="_blank" rel="noreferrer">Requirement Level</a></th><th>Value Type</th><th>Description</th><th>Example Values</th></tr></thead><tbody><tr><td><code>agentscope.function.name</code></td><td><code>Recommended</code></td><td>string</td><td>è°ƒç”¨çš„æ–¹æ³•/å‡½æ•°åã€‚</td><td><code>DashScopeChatModel.__call__</code>; <code>ToolKit.callTool</code></td></tr><tr><td><code>agentscope.function.input</code></td><td><code>Opt-In</code></td><td>string</td><td>æ–¹æ³•/å‡½æ•°çš„è¾“å…¥ã€‚[1]</td><td>{<br>Â Â &quot;tool_call&quot;: {<br>Â Â Â Â &quot;type&quot;: &quot;tool_use&quot;,<br>Â Â Â Â &quot;id&quot;: &quot;call_83fce0d1d2684545a13649&quot;,<br>Â Â Â Â &quot;name&quot;: &quot;multiply&quot;,<br>Â Â Â Â &quot;input&quot;: {<br>Â Â Â Â Â Â &quot;a&quot;: 5,<br>Â Â Â Â Â Â &quot;b&quot;: 3<br>Â Â Â Â }<br>Â Â }<br>}</td></tr><tr><td><code>agentscope.function.output</code></td><td><code>Opt-In</code></td><td>string</td><td>æ–¹æ³•/å‡½æ•°çš„è¿”å›å€¼ã€‚[2]</td><td><code>ToolResponse(content=[{&#39;type&#39;: &#39;text&#39;, &#39;text&#39;: &#39;5 Ã— 3 = 15&#39;}], metadata=None, stream=False, is_last=True, is_interrupted=False, id=&#39;2025-11-28 00:38:52.733_cc4ead&#39;)</code></td></tr></tbody></table><p><strong>[1] <code>agentscope.function.input</code></strong>: æ–¹æ³•/å‡½æ•°å…¥å‚ã€‚<strong>éœ€è¦</strong>æŒ‰ç…§ JSON çš„æ ¼å¼åºåˆ—åŒ–ã€‚</p><p><strong>[2] <code>agentscope.function.output</code></strong>: æ–¹æ³•/å‡½æ•°çš„è¿”å›å€¼ã€‚æŒ‰ç…§ JSON æˆ– toString çš„æ–¹å¼åºåˆ—åŒ–ã€‚</p><h4 id="format-è°ƒç”¨" tabindex="-1">Format è°ƒç”¨ <a class="header-anchor" href="#format-è°ƒç”¨" aria-label="Permalink to â€œFormat è°ƒç”¨â€">â€‹</a></h4><p>è¯¥ span ä»£è¡¨å‘èµ· model è°ƒç”¨å‰å¯¹è¯·æ±‚çš„å‡†å¤‡å’Œæ ¼å¼åŒ–è¿‡ç¨‹ã€‚åœ¨ AgentScope ä¸­ï¼Œè¯¥æ–¹æ³•å¯¹åº” Formatter å·¥å…·çš„è°ƒç”¨ã€‚</p><p><code>gen_ai.operation.name</code> <strong>åº”è¯¥</strong>ä¸º<code>format</code>ã€‚</p><p><strong>Span åç§°åº”è¯¥</strong>ä¸º<code>format {agentscope.format.target}</code>ã€‚</p><p><strong>Span kind åº”è¯¥</strong>ä¸º<code>INTERNAL</code>ã€‚</p><p><strong>Span status åº”è¯¥</strong>éµå¾ª<a href="https://opentelemetry.io/docs/specs/semconv/general/recording-errors/" target="_blank" rel="noreferrer">è®°å½•é”™è¯¯</a>æ–‡æ¡£ã€‚</p><p><strong>Attributes:</strong></p><table tabindex="0"><thead><tr><th>Key</th><th><a href="https://opentelemetry.io/docs/specs/semconv/general/attribute-requirement-level/" target="_blank" rel="noreferrer">Requirement Level</a></th><th>Value Type</th><th>Description</th><th>Example Values</th></tr></thead><tbody><tr><td><code>gen_ai.operation.name</code></td><td><code>Required</code></td><td>string</td><td>æ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„åç§°ã€‚</td><td><code>chat</code>; <code>generate_content</code>; <code>text_completion</code></td></tr><tr><td><code>error.type</code></td><td><code>Conditionally Required</code> if the operation ended in an error</td><td>string</td><td>æ“ä½œä¸­æ­¢æ—¶æŠ›å‡ºçš„é”™è¯¯ã€‚</td><td><code>timeout</code>; <code>java.net.UnknownHostException</code>; <code>server_certificate_invalid</code>; <code>500</code></td></tr><tr><td><code>agentscope.format.target</code></td><td><code>Required</code></td><td>string</td><td>æ ¼å¼åŒ–è¦è½¬ä¸ºçš„ç›®æ ‡ç±»å‹ã€‚å¦‚æœæ— æ³•è§£æåˆ°ç›®æ ‡ç±»å‹ï¼Œåˆ™è®¾ç½®ä¸º&#39;unknown&#39;ã€‚</td><td><code>dashscope</code>; <code>openai</code></td></tr><tr><td><code>agentscope.format.count</code></td><td><code>Recommended</code></td><td>int</td><td>å®é™…è¢«æ ¼å¼åŒ–çš„æ¶ˆæ¯æ•°é‡ã€‚[1]</td><td><code>3</code></td></tr><tr><td><code>agentscope.function.name</code></td><td><code>Recommended</code></td><td>string</td><td>è°ƒç”¨çš„æ–¹æ³•/å‡½æ•°åã€‚</td><td><code>DashScopeChatModel.__call__</code>; <code>ToolKit.callTool</code></td></tr><tr><td><code>agentscope.function.input</code></td><td><code>Opt-In</code></td><td>string</td><td>æ–¹æ³•/å‡½æ•°çš„è¾“å…¥ã€‚[2]</td><td>{<br>Â Â &quot;tool_call&quot;: {<br>Â Â Â Â &quot;type&quot;: &quot;tool_use&quot;,<br>Â Â Â Â &quot;id&quot;: &quot;call_83fce0d1d2684545a13649&quot;,<br>Â Â Â Â &quot;name&quot;: &quot;multiply&quot;,<br>Â Â Â Â &quot;input&quot;: {<br>Â Â Â Â Â Â &quot;a&quot;: 5,<br>Â Â Â Â Â Â &quot;b&quot;: 3<br>Â Â Â Â }<br>Â Â }<br>}</td></tr><tr><td><code>agentscope.function.output</code></td><td><code>Opt-In</code></td><td>string</td><td>æ–¹æ³•/å‡½æ•°çš„è¿”å›å€¼ã€‚[3]</td><td><code>ToolResponse(content=[{&#39;type&#39;: &#39;text&#39;, &#39;text&#39;: &#39;5 Ã— 3 = 15&#39;}], metadata=None, stream=False, is_last=True, is_interrupted=False, id=&#39;2025-11-28 00:38:52.733_cc4ead&#39;)</code></td></tr></tbody></table><p><strong>[1] <code>agentscope.format.count</code></strong>: å®é™…è¢«æ ¼å¼åŒ–çš„æ¶ˆæ¯æ•°é‡ã€‚å–å€¼ä¸æ ¼å¼åŒ–å‡½æ•°æ‰§è¡Œåè¿”å›çš„æ¶ˆæ¯åˆ—è¡¨å¤§å°ä¸€è‡´ï¼Œå¦‚æœåœ¨æ ¼å¼åŒ–è¿‡ç¨‹ä¸­è¿›è¡Œäº†æˆªæ–­æˆ–æ¶ˆæ¯è£å‰ªï¼Œåˆ™è¯¥å–å€¼å¯èƒ½å°äºä¼ å…¥çš„æ¶ˆæ¯åˆ—è¡¨å¤§å°ã€‚</p><p><strong>[2] <code>agentscope.function.input</code></strong>: æ–¹æ³•/å‡½æ•°å…¥å‚ã€‚<strong>éœ€è¦</strong>æŒ‰ç…§ JSON çš„æ ¼å¼åºåˆ—åŒ–ã€‚</p><p><strong>[3] <code>agentscope.function.output</code></strong>: æ–¹æ³•/å‡½æ•°çš„è¿”å›å€¼ã€‚æŒ‰ç…§ JSON æˆ– toString çš„æ–¹å¼åºåˆ—åŒ–ã€‚</p><h4 id="function-è°ƒç”¨" tabindex="-1">Function è°ƒç”¨ <a class="header-anchor" href="#function-è°ƒç”¨" aria-label="Permalink to â€œFunction è°ƒç”¨â€">â€‹</a></h4><p>è¯¥ span ä»£è¡¨å‘èµ·ä¸€æ¬¡ä»»æ„çš„å…³é”®è°ƒç”¨çš„è¿‡ç¨‹ã€‚åœ¨ AgentScope ä¸­ï¼Œè¯¥æ–¹æ³•å¯¹åº”å¸¸è§„å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå½“ä¸”ä»…å½“ä½¿ç”¨è€…é€šè¿‡ AgentScope æä¾›çš„æ–¹å¼ä¸ºæ–¹æ³•/å‡½æ•°æ·»åŠ é“¾è·¯è¿½è¸ªèƒ½åŠ›æ—¶ç”Ÿæ•ˆã€‚</p><p><code>gen_ai.operation.name</code> <strong>åº”è¯¥</strong>ä¸º<code>invoke_generic_function</code>ã€‚</p><p><strong>Span åç§°åº”è¯¥</strong>ä¸º<code>invoke_generic_function {agentscope.function.name}</code>ã€‚</p><p><strong>Span kind åº”è¯¥</strong>ä¸º<code>INTERNAL</code>ã€‚</p><p><strong>Span status åº”è¯¥</strong>éµå¾ª<a href="https://opentelemetry.io/docs/specs/semconv/general/recording-errors/" target="_blank" rel="noreferrer">è®°å½•é”™è¯¯</a>æ–‡æ¡£ã€‚</p><p><strong>Attributes:</strong></p><table tabindex="0"><thead><tr><th>Key</th><th><a href="https://opentelemetry.io/docs/specs/semconv/general/attribute-requirement-level/" target="_blank" rel="noreferrer">Requirement Level</a></th><th>Value Type</th><th>Description</th><th>Example Values</th></tr></thead><tbody><tr><td><code>gen_ai.operation.name</code></td><td><code>Required</code></td><td>string</td><td>æ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„åç§°ã€‚</td><td><code>chat</code>; <code>generate_content</code>; <code>text_completion</code></td></tr><tr><td><code>error.type</code></td><td><code>Conditionally Required</code> if the operation ended in an error</td><td>string</td><td>æ“ä½œä¸­æ­¢æ—¶æŠ›å‡ºçš„é”™è¯¯ã€‚</td><td><code>timeout</code>; <code>java.net.UnknownHostException</code>; <code>server_certificate_invalid</code>; <code>500</code></td></tr><tr><td><code>agentscope.function.name</code></td><td><code>Recommended</code></td><td>string</td><td>è°ƒç”¨çš„æ–¹æ³•/å‡½æ•°åã€‚</td><td><code>DashScopeChatModel.__call__</code>; <code>ToolKit.callTool</code></td></tr><tr><td><code>agentscope.function.input</code></td><td><code>Opt-In</code></td><td>string</td><td>æ–¹æ³•/å‡½æ•°çš„è¾“å…¥ã€‚[1]</td><td>{<br>Â Â &quot;tool_call&quot;: {<br>Â Â Â Â &quot;type&quot;: &quot;tool_use&quot;,<br>Â Â Â Â &quot;id&quot;: &quot;call_83fce0d1d2684545a13649&quot;,<br>Â Â Â Â &quot;name&quot;: &quot;multiply&quot;,<br>Â Â Â Â &quot;input&quot;: {<br>Â Â Â Â Â Â &quot;a&quot;: 5,<br>Â Â Â Â Â Â &quot;b&quot;: 3<br>Â Â Â Â }<br>Â Â }<br>}</td></tr><tr><td><code>agentscope.function.output</code></td><td><code>Opt-In</code></td><td>string</td><td>æ–¹æ³•/å‡½æ•°çš„è¿”å›å€¼ã€‚[2]</td><td><code>ToolResponse(content=[{&#39;type&#39;: &#39;text&#39;, &#39;text&#39;: &#39;5 Ã— 3 = 15&#39;}], metadata=None, stream=False, is_last=True, is_interrupted=False, id=&#39;2025-11-28 00:38:52.733_cc4ead&#39;)</code></td></tr></tbody></table><p><strong>[1] <code>agentscope.function.input</code></strong>: æ–¹æ³•/å‡½æ•°å…¥å‚ã€‚<strong>éœ€è¦</strong>æŒ‰ç…§ JSON çš„æ ¼å¼åºåˆ—åŒ–ã€‚</p><p><strong>[2] <code>agentscope.function.output</code></strong>: æ–¹æ³•/å‡½æ•°çš„è¿”å›å€¼ã€‚æŒ‰ç…§ JSON æˆ– toString çš„æ–¹å¼åºåˆ—åŒ–ã€‚</p><h2 id="é›†æˆ" tabindex="-1">é›†æˆ <a class="header-anchor" href="#é›†æˆ" aria-label="Permalink to â€œé›†æˆâ€">â€‹</a></h2><p>AgentScope Studio æä¾› <a href="https://opentelemetry.io/docs/specs/otlp/" target="_blank" rel="noreferrer">OpenTelemetry åè®®(OTLP)</a> è§„èŒƒçš„æœåŠ¡ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒAgentScope Studio å¯åŠ¨åï¼Œä¼šæš´éœ²ä»¥ä¸‹æœåŠ¡ç«¯ç‚¹ï¼š</p><ul><li><strong>OTLP/Trace/gRPC</strong>: <code>localhost:4317</code>ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>OTEL_GRPC_PORT</code> ç¯å¢ƒå˜é‡æ¥è°ƒæ•´ gRPC çš„æœåŠ¡ç«¯ç‚¹ã€‚</li><li><strong>OTLP/Trace/HTTP</strong>: <code>localhost:3000</code>ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>PORT</code> ç¯å¢ƒå˜é‡æ¥è°ƒæ•´ HTTP çš„æœåŠ¡ç«¯ç‚¹ã€‚</li></ul><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼šå½“å‰ Studio ä»…æ”¯æŒæ¥æ”¶ Trace ç±»å‹æ•°æ®ã€‚</p></blockquote><h3 id="agentscope-åº”ç”¨é›†æˆ" tabindex="-1">AgentScope åº”ç”¨é›†æˆ <a class="header-anchor" href="#agentscope-åº”ç”¨é›†æˆ" aria-label="Permalink to â€œAgentScope åº”ç”¨é›†æˆâ€">â€‹</a></h3><p>AgentScope æ¡†æ¶åŸç”Ÿæ”¯æŒäº† Trace æ•°æ®çš„é‡‡é›†ä¸å¯¼å‡ºï¼Œæ‚¨å¯ä»¥åœ¨åº”ç”¨ä¸­å¢åŠ ä¸€äº›é¢å¤–çš„ä»£ç å®ç° Trace æ•°æ®çš„ä¸ŠæŠ¥ã€‚</p><h4 id="agentscope-python-åº”ç”¨" tabindex="-1">AgentScope Python åº”ç”¨ <a class="header-anchor" href="#agentscope-python-åº”ç”¨" aria-label="Permalink to â€œAgentScope Python åº”ç”¨â€">â€‹</a></h4><p>åœ¨æ‚¨çš„åº”ç”¨ä»£ç å‰å¢åŠ ä»¥ä¸‹åˆå§‹åŒ–ä»£ç ã€‚</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agentscope</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agentscope.init(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">studio_url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å°†æ­¤å¤„æ›¿æ¢ä¸º Studio çš„ HTTP æœåŠ¡ç«¯ç‚¹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># your application code</span></span></code></pre></div><h4 id="agentscope-java-åº”ç”¨" tabindex="-1">AgentScope Java åº”ç”¨ <a class="header-anchor" href="#agentscope-java-åº”ç”¨" aria-label="Permalink to â€œAgentScope Java åº”ç”¨â€">â€‹</a></h4><ol><li>åœ¨æ‚¨çš„é¡¹ç›®ä¸­å¼•å…¥è¿æ¥ Studio æ‰€éœ€çš„ä¾èµ–ã€‚</li></ol><p>maven:</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;io.agentscope&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;agentscope-extensions-studio&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>gradle:</p><div class="language-gradle"><button title="Copy Code" class="copy"></button><span class="lang">gradle</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>implementation(&quot;io.agentscope:agentscope-extensions-studio&quot;)</span></span></code></pre></div><ol start="2"><li>åœ¨æ‚¨çš„åº”ç”¨ä»£ç å‰å¢åŠ ä»¥ä¸‹åˆå§‹åŒ–ä»£ç ã€‚</li></ol><div class="language-Java"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  StudioManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">studioUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">block</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // your application code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="loongsuite-opentelemetry-æ¢é’ˆé›†æˆ" tabindex="-1">LoongSuite/OpenTelemetry æ¢é’ˆé›†æˆ <a class="header-anchor" href="#loongsuite-opentelemetry-æ¢é’ˆé›†æˆ" aria-label="Permalink to â€œLoongSuite/OpenTelemetry æ¢é’ˆé›†æˆâ€">â€‹</a></h3><p>LoongSuite æ¢é’ˆæ˜¯é˜¿é‡Œäº‘äº‘åŸç”Ÿå›¢é˜ŸåŸºäº OpenTelemetry æ¢é’ˆç ”å‘çš„ï¼Œé¢å‘å¤šè¯­è¨€ AI åº”ç”¨çš„æ— ä¾µå…¥å¯è§‚æµ‹æ•°æ®é‡‡é›†å·¥å…·ã€‚è¿™äº›æ¢é’ˆé€šè¿‡ç¼–è¯‘æ—¶/è¿è¡Œæ—¶ä»£ç å¢å¼ºçš„æœºåˆ¶ï¼Œé€šè¿‡å¯¹åº”ç”¨ä»£ç å®Œæˆä»£ç æ’æ¡©å®ç°æ— ä¾µå…¥çš„å¯è§‚æµ‹æ€§ã€‚</p><p>LoongSuite æ¢é’ˆå’Œ OpenTelemetry æ¢é’ˆæ‰€é‡‡é›†çš„æ•°æ®å‡ä½¿ç”¨ OTLP Exportor è¿›è¡Œå¯¼å‡ºï¼Œå› æ­¤å¯ä»¥ç›´æ¥è¢« AgentScope Studio æ¥æ”¶å’Œå­˜å‚¨ã€‚å½“å‰æ”¯æŒçš„æ¢é’ˆåŒ…æ‹¬ï¼š</p><ul><li><a href="https://github.com/alibaba/loongsuite-python-agent" target="_blank" rel="noreferrer">LoongSuite Python Agent</a></li><li><a href="https://github.com/alibaba/loongsuite-go-agent" target="_blank" rel="noreferrer">LoongSuite Go Agent</a></li><li><a href="https://github.com/alibaba/loongsuite-java-agent" target="_blank" rel="noreferrer">LoongSuite Java Agent</a></li><li><a href="https://github.com/open-telemetry/opentelemetry-python-contrib" target="_blank" rel="noreferrer">OpenTelemetry Python Agent</a></li><li><a href="https://github.com/open-telemetry/opentelemetry-java-instrumentation" target="_blank" rel="noreferrer">OpenTelemetry Java Agent</a></li><li><a href="https://github.com/open-telemetry/opentelemetry-js-contrib" target="_blank" rel="noreferrer">OpenTelemetry JavaScript Agent</a></li><li>...(å…¶ä»–ä»»ä½•æ”¯æŒçš„ OTLP Exporter çš„æ•°æ®é‡‡é›†å™¨)</li></ul><h4 id="loongsuite-python-æ¢é’ˆé›†æˆ" tabindex="-1">LoongSuite Python æ¢é’ˆé›†æˆ <a class="header-anchor" href="#loongsuite-python-æ¢é’ˆé›†æˆ" aria-label="Permalink to â€œLoongSuite Python æ¢é’ˆé›†æˆâ€">â€‹</a></h4><ol><li>å‚è€ƒ <a href="https://github.com/alibaba/loongsuite-python-agent/tree/main/instrumentation-loongsuite/loongsuite-instrumentation-agentscope" target="_blank" rel="noreferrer">LoongSuite Python æ¢é’ˆå®˜æ–¹æ–‡æ¡£</a>ï¼Œå®‰è£…æ¢é’ˆ</li><li>ä¿®æ”¹å¯åŠ¨å‚æ•°ï¼Œå°†æ•°æ®å¯¼å‡ºåˆ° AgentScope Studioï¼Œè¯·å°† <code>exporter_otlp_endpoint</code> æ›¿æ¢ä¸ºæ‚¨ Studio çš„ gRPC æœåŠ¡åœ°å€</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loongsuite-instrument</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --traces_exporter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> otlp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --metrics_exporter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --service_name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your-service-name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --exporter_otlp_endpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0.0.0.0:4317</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp.py</span></span></code></pre></div><h4 id="opentelemetry-java-æ¢é’ˆé›†æˆ" tabindex="-1">OpenTelemetry Java æ¢é’ˆé›†æˆ <a class="header-anchor" href="#opentelemetry-java-æ¢é’ˆé›†æˆ" aria-label="Permalink to â€œOpenTelemetry Java æ¢é’ˆé›†æˆâ€">â€‹</a></h4><ol><li>å‚è€ƒ <a href="https://github.com/open-telemetry/opentelemetry-java-instrumentation" target="_blank" rel="noreferrer">OpenTelemetry Java æ¢é’ˆå®˜æ–¹æ–‡æ¡£</a>ï¼Œå®‰è£…æ¢é’ˆ</li><li>ä¿®æ”¹å¯åŠ¨å‚æ•°ï¼Œå°†æ•°æ®å¯¼å‡ºåˆ° AgentScope Studioï¼Œè¯·å°† <code>otel.exporter.otlp.traces.endpoint</code> æ›¿æ¢ä¸ºæ‚¨ Studio çš„ gRPC æœåŠ¡åœ°å€</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -javaagent:path/to/opentelemetry-javaagent.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -Dotel.resource.attributes=service.name=your-service-name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -Dotel.traces.exporter=otlp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -Dotel.metrics.exporter=console</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -Dotel.exporter.otlp.traces.endpoint=http://localhost:4317</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp.jar</span></span></code></pre></div><h3 id="é«˜çº§é›†æˆ-å¯¼å…¥è‡ªå®šä¹‰é“¾è·¯æ•°æ®" tabindex="-1">é«˜çº§é›†æˆï¼šå¯¼å…¥è‡ªå®šä¹‰é“¾è·¯æ•°æ® <a class="header-anchor" href="#é«˜çº§é›†æˆ-å¯¼å…¥è‡ªå®šä¹‰é“¾è·¯æ•°æ®" aria-label="Permalink to â€œé«˜çº§é›†æˆï¼šå¯¼å…¥è‡ªå®šä¹‰é“¾è·¯æ•°æ®â€">â€‹</a></h3><p>å¦‚æœæ‚¨éœ€è¦å°†ä»»æ„æ¥æºçš„å¯è§‚æµ‹æ•°æ®ä½œä¸ºé“¾è·¯æ•°æ®å¯¼å‡ºåˆ° AgentScope Studioï¼Œå¯ä»¥å‚ç…§ <a href="https://opentelemetry.io/docs/specs/otlp/" target="_blank" rel="noreferrer">OTLP åè®®</a>å¯¹æ•°æ®è¿›è¡Œç»„è£…ã€‚AgentScope Studio æ¥æ”¶ Protobuf æ ¼å¼ç¼–ç çš„é“¾è·¯æ•°æ®ï¼Œå¹¶åŒæ—¶æä¾› HTTP å’Œ gRPC æœåŠ¡ï¼ŒæœåŠ¡æš´éœ²æ–¹å¼åˆ†åˆ«éµå¾ª <a href="https://github.com/open-telemetry/opentelemetry-proto/blob/main/opentelemetry/proto/collector/trace/v1/trace_service_http.yaml" target="_blank" rel="noreferrer">OTLP/HTTP</a> å’Œ <a href="https://github.com/open-telemetry/opentelemetry-proto/blob/main/opentelemetry/proto/collector/trace/v1/trace_service.proto" target="_blank" rel="noreferrer">OTLP/gRPC</a> çº¦å®šï¼Œæ•°æ®ä½“éµå¾ª <a href="https://github.com/open-telemetry/opentelemetry-proto/blob/main/opentelemetry/proto/trace/v1/trace.proto" target="_blank" rel="noreferrer">OTLP Protobuf</a> å®šä¹‰ã€‚</p><h4 id="ä½¿ç”¨-otlp-exporter-å¯¼å‡ºæ•°æ®" tabindex="-1">ä½¿ç”¨ OTLP Exporter å¯¼å‡ºæ•°æ® <a class="header-anchor" href="#ä½¿ç”¨-otlp-exporter-å¯¼å‡ºæ•°æ®" aria-label="Permalink to â€œä½¿ç”¨ OTLP Exporter å¯¼å‡ºæ•°æ®â€">â€‹</a></h4><p>ä¸ºä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼Œå¼ºçƒˆå»ºè®®æ‚¨ä½¿ç”¨ OTLP Exporter è¿›è¡Œæ•°æ®å¯¼å‡ºã€‚æ‚¨å¯ä»¥åœ¨ <a href="https://opentelemetry.io/docs/specs/otel/protocol/exporter/" target="_blank" rel="noreferrer">OTLP å®˜æ–¹æ–‡æ¡£</a>ä¸­æ‰¾åˆ°æ›´è¯¦ç»†çš„æ•™ç¨‹ã€‚ä»¥ä¸‹æ˜¯ Python è¯­è¨€çš„ OTLP Exporter ç¤ºä¾‹:</p><blockquote><p>ğŸ’¡ <strong>æç¤º</strong>ï¼šæœ¬èŠ‚éƒ¨åˆ†å‚è€ƒè‡ª <a href="https://opentelemetry-python.readthedocs.io/en/latest/exporter/otlp/otlp.html" target="_blank" rel="noreferrer">OpenTelemetry Python API</a>ã€‚</p></blockquote><p>åˆ›å»º OTLP Exporter å¹¶åˆå§‹åŒ– TracerProviderï¼š</p><div class="language-Python"><button title="Copy Code" class="copy"></button><span class="lang">Python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> opentelemetry.sdk.trace </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TracerProvider</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> opentelemetry.sdk.trace.export </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BatchSpanProcessor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> opentelemetry.exporter.otlp.proto.http.trace_exporter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    OTLPSpanExporter,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tracer_provider </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TracerProvider()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OTLP/HTTP for OpenTelemetry Python SDK by default</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">exporter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OTLPSpanExporter(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">endpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">span_processor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BatchSpanProcessor(exporter)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tracer_provider.add_span_processor(span_processor)</span></span></code></pre></div><p>ä½¿ç”¨ TracerProvider åˆ›å»º Tracer å¹¶æ„å»º Spanï¼š</p><div class="language-Python"><button title="Copy Code" class="copy"></button><span class="lang">Python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># create tracer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tracer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tracer_provider.get_tracer(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test_module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># create span</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># attributes maybe set here</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tracer.start_as_current_span(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> span:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # do something</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # attributes may be set here</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        span.set_attributes({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test_key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test_value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        span.set_status(trace_api.StatusCode.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        span.set_status(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            trace_api.StatusCode.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ERROR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        span.record_exception(e)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span></code></pre></div>`,87)])])}const E=s(l,[["render",p]]);export{y as __pageData,E as default};
