import{_ as a,c as i,o as s,ah as n,am as t,an as o,ao as r}from"./chunks/framework.CZfrKfUB.js";const y=JSON.parse('{"title":"Run Tracing","description":"","frontmatter":{},"headers":[],"relativePath":"develop/tracing.md","filePath":"en/develop/tracing.md"}'),l={name:"develop/tracing.md"};function p(d,e,h,c,g,k){return s(),i("div",null,[...e[0]||(e[0]=[n('<h1 id="run-tracing" tabindex="-1">Run Tracing <a class="header-anchor" href="#run-tracing" aria-label="Permalink to â€œRun Tracingâ€">â€‹</a></h1><p>In the Trace page of the Studio sidebar, you can view detailed information about run tracing, including inputs and outputs of various modules, tool call information, execution time, and other runtime information.</p><p>This feature is built on the <a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/" target="_blank" rel="noreferrer">OpenTelemetry semantic conventions</a> and <a href="https://opentelemetry.io/docs/specs/otlp/" target="_blank" rel="noreferrer">OTLP protocol</a>. It not only provides out-of-the-box reception and storage of various observability information reported by AgentScope, but also supports integration of data reported by any collection tools/AI application frameworks based on OpenTelemetry or LoongSuite.</p><p><img src="'+t+'" alt="Trace"></p><h2 id="overview-page" tabindex="-1">Overview Page <a class="header-anchor" href="#overview-page" aria-label="Permalink to â€œOverview Pageâ€">â€‹</a></h2><p>On this page, you can view basic information about trace data reported to Studio.</p><blockquote><p>ðŸ’¡ <strong>Tip</strong>: Hover your mouse over the icon next to the trace name to view basic metadata of that trace, such as Trace ID.</p></blockquote><p><img src="'+o+'" alt="Trace"></p><h2 id="details-page" tabindex="-1">Details Page <a class="header-anchor" href="#details-page" aria-label="Permalink to â€œDetails Pageâ€">â€‹</a></h2><p>Click on any trace in the overview page to view the call sequence and call relationships of that trace. Further select calls at different levels to see detailed context when these calls occurred.</p><p>In the Metadata area, you can view the input and output of calls. For AI-related calls, such as LLM, Agent, etc., inputs and outputs will be displayed according to the <a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/#recording-content-on-attributes" target="_blank" rel="noreferrer">structure</a> defined by the OpenTelemetry semantic conventions. For regular calls, such as Function, Format, etc., inputs and outputs will be displayed according to the AgentScope extended <a href="#agentscope-extended-conventions">semantic conventions</a>.</p><p><img src="'+t+'" alt="Trace"></p><p>In the All Attributes area, you can see all key metadata of this call, with naming following the <a href="#semantic-conventions">semantic conventions</a>.</p><p><img src="'+r+`" alt="Trace"></p><h2 id="semantic-conventions" tabindex="-1">Semantic Conventions <a class="header-anchor" href="#semantic-conventions" aria-label="Permalink to â€œSemantic Conventionsâ€">â€‹</a></h2><p>AgentScope-Studio&#39;s observability data follows semantic conventions based on <a href="#opentelemetry-generative-ai">OpenTelemetry</a>. Data following these semantic conventions will receive more accurate and clear processing and display in Studio.</p><blockquote><p>ðŸ’¡ <strong>Tip</strong>: The native observability capabilities of the AgentScope library already follow these semantic conventions. Even if observability data from other sources does not yet follow these semantic conventions, trace data can still be displayed normally, but some key information may not be highlighted/specially displayed.</p></blockquote><h3 id="opentelemetry-generative-ai" tabindex="-1">OpenTelemetry Generative AI <a class="header-anchor" href="#opentelemetry-generative-ai" aria-label="Permalink to â€œOpenTelemetry Generative AIâ€">â€‹</a></h3><p>OpenTelemetry provides a set of semantic convention standards for observability data of Generative AI applications. For detailed definitions, see <a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/" target="_blank" rel="noreferrer">Semantic conventions for generative client AI spans</a> and <a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-agent-spans/" target="_blank" rel="noreferrer">Semantic Conventions for GenAI agent and framework spans</a>.</p><blockquote><p>ðŸ’¡ <strong>Tip</strong>: Studio currently follows OpenTelemetry semantic conventions version 1.38.0.</p></blockquote><p>Current semantic conventions include:</p><ul><li><a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/#inference" target="_blank" rel="noreferrer"><strong>Inference</strong></a>: model calls</li><li><a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-agent-spans/#invoke-agent-span" target="_blank" rel="noreferrer"><strong>Invoke agent span</strong></a>: agent calls</li><li><a href="https://opentelemetry.io/docs/specs/semconv/gen-ai/gen-ai-spans/#execute-tool-span" target="_blank" rel="noreferrer"><strong>Execute tool span</strong></a>: toolkit calls</li></ul><h3 id="agentscope-extended-conventions" tabindex="-1">AgentScope Extended Conventions <a class="header-anchor" href="#agentscope-extended-conventions" aria-label="Permalink to â€œAgentScope Extended Conventionsâ€">â€‹</a></h3><p>In addition to various semantic conventions defined in OpenTelemetry, AgentScope has extended semantic conventions for some specific call processes to display the call process more clearly.</p><h4 id="common-call" tabindex="-1">Common Call <a class="header-anchor" href="#common-call" aria-label="Permalink to â€œCommon Callâ€">â€‹</a></h4><p>Applicable to all key call processes occurring in AI applications.</p><table tabindex="0"><thead><tr><th>Key</th><th><a href="https://opentelemetry.io/docs/specs/semconv/general/attribute-requirement-level/" target="_blank" rel="noreferrer">Requirement Level</a></th><th>Value Type</th><th>Description</th><th>Example Values</th></tr></thead><tbody><tr><td><code>agentscope.function.name</code></td><td><code>Recommended</code></td><td>string</td><td>The name of the method/function called.</td><td><code>DashScopeChatModel.__call__</code>; <code>ToolKit.callTool</code></td></tr><tr><td><code>agentscope.function.input</code></td><td><code>Opt-In</code></td><td>string</td><td>The input of the method/function. [1]</td><td>{<br>Â Â &quot;tool_call&quot;: {<br>Â Â Â Â &quot;type&quot;: &quot;tool_use&quot;,<br>Â Â Â Â &quot;id&quot;: &quot;call_83fce0d1d2684545a13649&quot;,<br>Â Â Â Â &quot;name&quot;: &quot;multiply&quot;,<br>Â Â Â Â &quot;input&quot;: {<br>Â Â Â Â Â Â &quot;a&quot;: 5,<br>Â Â Â Â Â Â &quot;b&quot;: 3<br>Â Â Â Â }<br>Â Â }<br>}</td></tr><tr><td><code>agentscope.function.output</code></td><td><code>Opt-In</code></td><td>string</td><td>The return value of the method/function. [2]</td><td><code>ToolResponse(content=[{&#39;type&#39;: &#39;text&#39;, &#39;text&#39;: &#39;5 Ã— 3 = 15&#39;}], metadata=None, stream=False, is_last=True, is_interrupted=False, id=&#39;2025-11-28 00:38:52.733_cc4ead&#39;)</code></td></tr></tbody></table><p><strong>[1] <code>agentscope.function.input</code></strong>: Method/function input parameters. <strong>Must</strong> be serialized in JSON format.</p><p><strong>[2] <code>agentscope.function.output</code></strong>: The return value of the method/function. Serialized in JSON or toString format.</p><h4 id="format-call" tabindex="-1">Format Call <a class="header-anchor" href="#format-call" aria-label="Permalink to â€œFormat Callâ€">â€‹</a></h4><p>This span represents the preparation and formatting process of the request before initiating a model call. In AgentScope, this method corresponds to the invocation of the Formatter tool.</p><p><code>gen_ai.operation.name</code> <strong>should</strong> be <code>format</code>.</p><p><strong>Span name should</strong> be <code>format {agentscope.format.target}</code>.</p><p><strong>Span kind should</strong> be <code>INTERNAL</code>.</p><p><strong>Span status should</strong> follow the <a href="https://opentelemetry.io/docs/specs/semconv/general/recording-errors/" target="_blank" rel="noreferrer">recording errors</a> documentation.</p><p><strong>Attributes:</strong></p><table tabindex="0"><thead><tr><th>Key</th><th><a href="https://opentelemetry.io/docs/specs/semconv/general/attribute-requirement-level/" target="_blank" rel="noreferrer">Requirement Level</a></th><th>Value Type</th><th>Description</th><th>Example Values</th></tr></thead><tbody><tr><td><code>gen_ai.operation.name</code></td><td><code>Required</code></td><td>string</td><td>The name of the operation being performed.</td><td><code>chat</code>; <code>generate_content</code>; <code>text_completion</code></td></tr><tr><td><code>error.type</code></td><td><code>Conditionally Required</code> if the operation ended in an error</td><td>string</td><td>The error thrown when the operation aborted.</td><td><code>timeout</code>; <code>java.net.UnknownHostException</code>; <code>server_certificate_invalid</code>; <code>500</code></td></tr><tr><td><code>agentscope.format.target</code></td><td><code>Required</code></td><td>string</td><td>The target type to format to. If the target type cannot be resolved, set to &#39;unknown&#39;.</td><td><code>dashscope</code>; <code>openai</code></td></tr><tr><td><code>agentscope.format.count</code></td><td><code>Recommended</code></td><td>int</td><td>The actual number of messages formatted. [1]</td><td><code>3</code></td></tr><tr><td><code>agentscope.function.name</code></td><td><code>Recommended</code></td><td>string</td><td>The name of the method/function called.</td><td><code>DashScopeChatModel.__call__</code>; <code>ToolKit.callTool</code></td></tr><tr><td><code>agentscope.function.input</code></td><td><code>Opt-In</code></td><td>string</td><td>The input of the method/function. [2]</td><td>{<br>Â Â &quot;tool_call&quot;: {<br>Â Â Â Â &quot;type&quot;: &quot;tool_use&quot;,<br>Â Â Â Â &quot;id&quot;: &quot;call_83fce0d1d2684545a13649&quot;,<br>Â Â Â Â &quot;name&quot;: &quot;multiply&quot;,<br>Â Â Â Â &quot;input&quot;: {<br>Â Â Â Â Â Â &quot;a&quot;: 5,<br>Â Â Â Â Â Â &quot;b&quot;: 3<br>Â Â Â Â }<br>Â Â }<br>}</td></tr><tr><td><code>agentscope.function.output</code></td><td><code>Opt-In</code></td><td>string</td><td>The return value of the method/function. [3]</td><td><code>ToolResponse(content=[{&#39;type&#39;: &#39;text&#39;, &#39;text&#39;: &#39;5 Ã— 3 = 15&#39;}], metadata=None, stream=False, is_last=True, is_interrupted=False, id=&#39;2025-11-28 00:38:52.733_cc4ead&#39;)</code></td></tr></tbody></table><p><strong>[1] <code>agentscope.format.count</code></strong>: The actual number of messages formatted. The value is consistent with the size of the message list returned after the formatting function is executed. If truncation or message trimming is performed during formatting, this value may be less than the size of the incoming message list.</p><p><strong>[2] <code>agentscope.function.input</code></strong>: Method/function input parameters. <strong>Must</strong> be serialized in JSON format.</p><p><strong>[3] <code>agentscope.function.output</code></strong>: The return value of the method/function. Serialized in JSON or toString format.</p><h4 id="function-call" tabindex="-1">Function Call <a class="header-anchor" href="#function-call" aria-label="Permalink to â€œFunction Callâ€">â€‹</a></h4><p>This span represents the process of initiating any key call. In AgentScope, this method corresponds to the execution process of regular functions, and only takes effect when users add trace tracking capability to methods/functions through the methods provided by AgentScope.</p><p><code>gen_ai.operation.name</code> <strong>should</strong> be <code>invoke_generic_function</code>.</p><p><strong>Span name should</strong> be <code>invoke_generic_function {agentscope.function.name}</code>.</p><p><strong>Span kind should</strong> be <code>INTERNAL</code>.</p><p><strong>Span status should</strong> follow the <a href="https://opentelemetry.io/docs/specs/semconv/general/recording-errors/" target="_blank" rel="noreferrer">recording errors</a> documentation.</p><p><strong>Attributes:</strong></p><table tabindex="0"><thead><tr><th>Key</th><th><a href="https://opentelemetry.io/docs/specs/semconv/general/attribute-requirement-level/" target="_blank" rel="noreferrer">Requirement Level</a></th><th>Value Type</th><th>Description</th><th>Example Values</th></tr></thead><tbody><tr><td><code>gen_ai.operation.name</code></td><td><code>Required</code></td><td>string</td><td>The name of the operation being performed.</td><td><code>chat</code>; <code>generate_content</code>; <code>text_completion</code></td></tr><tr><td><code>error.type</code></td><td><code>Conditionally Required</code> if the operation ended in an error</td><td>string</td><td>The error thrown when the operation aborted.</td><td><code>timeout</code>; <code>java.net.UnknownHostException</code>; <code>server_certificate_invalid</code>; <code>500</code></td></tr><tr><td><code>agentscope.function.name</code></td><td><code>Recommended</code></td><td>string</td><td>The name of the method/function called.</td><td><code>DashScopeChatModel.__call__</code>; <code>ToolKit.callTool</code></td></tr><tr><td><code>agentscope.function.input</code></td><td><code>Opt-In</code></td><td>string</td><td>The input of the method/function. [1]</td><td>{<br>Â Â &quot;tool_call&quot;: {<br>Â Â Â Â &quot;type&quot;: &quot;tool_use&quot;,<br>Â Â Â Â &quot;id&quot;: &quot;call_83fce0d1d2684545a13649&quot;,<br>Â Â Â Â &quot;name&quot;: &quot;multiply&quot;,<br>Â Â Â Â &quot;input&quot;: {<br>Â Â Â Â Â Â &quot;a&quot;: 5,<br>Â Â Â Â Â Â &quot;b&quot;: 3<br>Â Â Â Â }<br>Â Â }<br>}</td></tr><tr><td><code>agentscope.function.output</code></td><td><code>Opt-In</code></td><td>string</td><td>The return value of the method/function. [2]</td><td><code>ToolResponse(content=[{&#39;type&#39;: &#39;text&#39;, &#39;text&#39;: &#39;5 Ã— 3 = 15&#39;}], metadata=None, stream=False, is_last=True, is_interrupted=False, id=&#39;2025-11-28 00:38:52.733_cc4ead&#39;)</code></td></tr></tbody></table><p><strong>[1] <code>agentscope.function.input</code></strong>: Method/function input parameters. <strong>Must</strong> be serialized in JSON format.</p><p><strong>[2] <code>agentscope.function.output</code></strong>: The return value of the method/function. Serialized in JSON or toString format.</p><h2 id="integration" tabindex="-1">Integration <a class="header-anchor" href="#integration" aria-label="Permalink to â€œIntegrationâ€">â€‹</a></h2><p>AgentScope Studio provides services that comply with the <a href="https://opentelemetry.io/docs/specs/otlp/" target="_blank" rel="noreferrer">OpenTelemetry Protocol (OTLP)</a> specification.</p><p>By default, after AgentScope Studio starts, it exposes the following service endpoints:</p><ul><li><strong>OTLP/Trace/gRPC</strong>: <code>localhost:4317</code>, you can adjust the gRPC service endpoint by modifying the <code>OTEL_GRPC_PORT</code> environment variable.</li><li><strong>OTLP/Trace/HTTP</strong>: <code>localhost:3000</code>, you can adjust the HTTP service endpoint by modifying the <code>PORT</code> environment variable.</li></ul><blockquote><p>ðŸ’¡ <strong>Tip</strong>: Studio currently only supports receiving Trace type data.</p></blockquote><h3 id="agentscope-application-integration" tabindex="-1">AgentScope Application Integration <a class="header-anchor" href="#agentscope-application-integration" aria-label="Permalink to â€œAgentScope Application Integrationâ€">â€‹</a></h3><p>The AgentScope framework natively supports Trace data collection and export. You can add some additional code to your application to implement Trace data reporting.</p><h4 id="agentscope-python-application" tabindex="-1">AgentScope Python Application <a class="header-anchor" href="#agentscope-python-application" aria-label="Permalink to â€œAgentScope Python Applicationâ€">â€‹</a></h4><p>Add the following initialization code before your application code.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> agentscope</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">agentscope.init(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">studio_url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Replace this with Studio&#39;s HTTP service endpoint</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># your application code</span></span></code></pre></div><h4 id="agentscope-java-application" tabindex="-1">AgentScope Java Application <a class="header-anchor" href="#agentscope-java-application" aria-label="Permalink to â€œAgentScope Java Applicationâ€">â€‹</a></h4><ol><li>Introduce the dependencies required to connect to Studio in your project.</li></ol><p>maven:</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;io.agentscope&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;agentscope-extensions-studio&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>gradle:</p><div class="language-gradle"><button title="Copy Code" class="copy"></button><span class="lang">gradle</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>implementation(&quot;io.agentscope:agentscope-extensions-studio&quot;)</span></span></code></pre></div><ol start="2"><li>Add the following initialization code before your application code.</li></ol><div class="language-Java"><button title="Copy Code" class="copy"></button><span class="lang">Java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  StudioManager.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">init</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">studioUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">initialize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">block</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // your application code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="loongsuite-opentelemetry-agent-integration" tabindex="-1">LoongSuite/OpenTelemetry Agent Integration <a class="header-anchor" href="#loongsuite-opentelemetry-agent-integration" aria-label="Permalink to â€œLoongSuite/OpenTelemetry Agent Integrationâ€">â€‹</a></h3><p>LoongSuite agents are non-intrusive observability data collection tools for multi-language AI applications, developed by the Alibaba Cloud Cloud Native team based on OpenTelemetry agents. These agents achieve non-intrusive observability through compile-time/runtime code enhancement mechanisms by completing code instrumentation of application code.</p><p>The data collected by LoongSuite agents and OpenTelemetry agents are both exported using OTLP Exporter, so they can be directly received and stored by AgentScope Studio. Currently supported agents include:</p><ul><li><a href="https://github.com/alibaba/loongsuite-python-agent" target="_blank" rel="noreferrer">LoongSuite Python Agent</a></li><li><a href="https://github.com/alibaba/loongsuite-go-agent" target="_blank" rel="noreferrer">LoongSuite Go Agent</a></li><li><a href="https://github.com/alibaba/loongsuite-java-agent" target="_blank" rel="noreferrer">LoongSuite Java Agent</a></li><li><a href="https://github.com/open-telemetry/opentelemetry-python-contrib" target="_blank" rel="noreferrer">OpenTelemetry Python Agent</a></li><li><a href="https://github.com/open-telemetry/opentelemetry-java-instrumentation" target="_blank" rel="noreferrer">OpenTelemetry Java Agent</a></li><li><a href="https://github.com/open-telemetry/opentelemetry-js-contrib" target="_blank" rel="noreferrer">OpenTelemetry JavaScript Agent</a></li><li>...(Any other data collectors that support OTLP Exporter)</li></ul><h4 id="loongsuite-python-agent-integration" tabindex="-1">LoongSuite Python Agent Integration <a class="header-anchor" href="#loongsuite-python-agent-integration" aria-label="Permalink to â€œLoongSuite Python Agent Integrationâ€">â€‹</a></h4><ol><li>Refer to the <a href="https://github.com/alibaba/loongsuite-python-agent/tree/main/instrumentation-loongsuite/loongsuite-instrumentation-agentscope" target="_blank" rel="noreferrer">LoongSuite Python Agent official documentation</a> to install the agent</li><li>Modify the startup parameters to export data to AgentScope Studio. Please replace <code>exporter_otlp_endpoint</code> with your Studio&#39;s gRPC service address</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loongsuite-instrument</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --traces_exporter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> otlp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --metrics_exporter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --service_name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your-service-name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --exporter_otlp_endpoint</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0.0.0.0:4317</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp.py</span></span></code></pre></div><h4 id="opentelemetry-java-agent-integration" tabindex="-1">OpenTelemetry Java Agent Integration <a class="header-anchor" href="#opentelemetry-java-agent-integration" aria-label="Permalink to â€œOpenTelemetry Java Agent Integrationâ€">â€‹</a></h4><ol><li>Refer to the <a href="https://github.com/open-telemetry/opentelemetry-java-instrumentation" target="_blank" rel="noreferrer">OpenTelemetry Java Agent official documentation</a> to install the agent</li><li>Modify the startup parameters to export data to AgentScope Studio. Please replace <code>otel.exporter.otlp.traces.endpoint</code> with your Studio&#39;s gRPC service address</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">java</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -javaagent:path/to/opentelemetry-javaagent.jar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -Dotel.resource.attributes=service.name=your-service-name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -Dotel.traces.exporter=otlp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -Dotel.metrics.exporter=console</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -Dotel.exporter.otlp.traces.endpoint=http://localhost:4317</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     -jar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myapp.jar</span></span></code></pre></div><h3 id="advanced-integration-import-custom-trace-data" tabindex="-1">Advanced Integration: Import Custom Trace Data <a class="header-anchor" href="#advanced-integration-import-custom-trace-data" aria-label="Permalink to â€œAdvanced Integration: Import Custom Trace Dataâ€">â€‹</a></h3><p>If you need to export observability data from any source as trace data to AgentScope Studio, you can assemble the data according to the <a href="https://opentelemetry.io/docs/specs/otlp/" target="_blank" rel="noreferrer">OTLP protocol</a>. AgentScope Studio receives trace data encoded in Protobuf format and provides both HTTP and gRPC services. The service exposure methods follow the <a href="https://github.com/open-telemetry/opentelemetry-proto/blob/main/opentelemetry/proto/collector/trace/v1/trace_service_http.yaml" target="_blank" rel="noreferrer">OTLP/HTTP</a> and <a href="https://github.com/open-telemetry/opentelemetry-proto/blob/main/opentelemetry/proto/collector/trace/v1/trace_service.proto" target="_blank" rel="noreferrer">OTLP/gRPC</a> conventions, and the data body follows the <a href="https://github.com/open-telemetry/opentelemetry-proto/blob/main/opentelemetry/proto/trace/v1/trace.proto" target="_blank" rel="noreferrer">OTLP Protobuf</a> definition.</p><h4 id="export-data-using-otlp-exporter" tabindex="-1">Export Data Using OTLP Exporter <a class="header-anchor" href="#export-data-using-otlp-exporter" aria-label="Permalink to â€œExport Data Using OTLP Exporterâ€">â€‹</a></h4><p>To ensure data correctness, it is strongly recommended that you use OTLP Exporter for data export. You can find more detailed tutorials in the <a href="https://opentelemetry.io/docs/specs/otel/protocol/exporter/" target="_blank" rel="noreferrer">OTLP official documentation</a>. Here is an OTLP Exporter example in Python:</p><blockquote><p>ðŸ’¡ <strong>Tip</strong>: This section partially references the <a href="https://opentelemetry-python.readthedocs.io/en/latest/exporter/otlp/otlp.html" target="_blank" rel="noreferrer">OpenTelemetry Python API</a>.</p></blockquote><p>Create an OTLP Exporter and initialize TracerProvider:</p><div class="language-Python"><button title="Copy Code" class="copy"></button><span class="lang">Python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> opentelemetry.sdk.trace </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TracerProvider</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> opentelemetry.sdk.trace.export </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BatchSpanProcessor</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> opentelemetry.exporter.otlp.proto.http.trace_exporter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    OTLPSpanExporter,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tracer_provider </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> TracerProvider()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OTLP/HTTP for OpenTelemetry Python SDK by default</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">exporter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OTLPSpanExporter(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">endpoint</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:3000&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">span_processor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BatchSpanProcessor(exporter)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tracer_provider.add_span_processor(span_processor)</span></span></code></pre></div><p>Use TracerProvider to create a Tracer and build Span:</p><div class="language-Python"><button title="Copy Code" class="copy"></button><span class="lang">Python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># create tracer</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tracer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tracer_provider.get_tracer(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test_module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># create span</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># attributes maybe set here</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tracer.start_as_current_span(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> span:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # do something</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # attributes may be set here</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        span.set_attributes({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test_key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test_value&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        span.set_status(trace_api.StatusCode.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">OK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        span.set_status(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            trace_api.StatusCode.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ERROR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        span.record_exception(e)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span></code></pre></div>`,87)])])}const m=a(l,[["render",p]]);export{y as __pageData,m as default};
